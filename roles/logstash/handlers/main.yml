---
- name: reload systemd daemon
  become: yes
  command: systemctl daemon-reload
  tags:
    - logstash

- name: enable and start logstash
  become: yes
  service:
    name: logstash
    enabled: yes
    state: started
  tags:
    - logstash

- name: restart logstash
  become: yes
  service:
    name: logstash
    state: restarted
  tags:
    - logstash

- name: restart rsyslog
  become: yes
  service:
    name: rsyslog
    state: restarted
  tags:
    - logstash

- name: reload consul
  become: yes
  command: systemctl is-active consul && systemctl reload consul
  failed_when: false
  tags:
    - logstash

- name: reload consul-template
  become: yes
  command: systemctl reload consul-template
  tags:
    - logstash
